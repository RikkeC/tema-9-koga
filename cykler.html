<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koga Center Copenhagen | Alle cykelmodeller</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,800|Open+Sans:400,700,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="apple-touch-icon" sizes="180x180" href="myIcons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="myIcons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="myIcons/favicon-16x16.png">
    <link rel="manifest" href="myIcons/site.webmanifest">
    <link rel="shortcut icon" href="myIcons/favicon.ico">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-config" content="myIcons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <meta name="Koga center cykler" content="Hos Koga center frederiksberg sælger vi kvalitets cykler fra Koga Holland. ">


</head>

<body>
    <header></header>

    <!--vis alle en LISTE af kategorier  -->
    <main id="cykellisten">
        <div class="flex-container" style="display: flex;">
            <div style="min-width: 25%">
                <!-- column with menu-->
                <div class="fix-side-menu s-hide">
                    <ul class="fix-menu-list">
                        <li class="list_item"><a class="fixed_menu_link" href="#by-cykler">Bycykler</a></li>
                        <li class="list_item"><a class="fixed_menu_link" href="#racer-cykler">Racer</a></li>
                        <li class="list_item"><a class="fixed_menu_link" href="#trekking-cykler">Trekking</a></li>
                        <li class="list_item"><a class="fixed_menu_link" href="#el-cykler">Elcykler</a></li>
                        <li class="list_item"><a class="fixed_menu_link" href="#signature-cykler">Signaturecykler</a></li>
                    </ul>
                </div>
            </div>
            <div style="width: 70%">
                <!-- Column with content-->
                <h1 class="overskrift"></h1>
                <h4 class="underoverskrift"></h4>
                <section id="by-cykler" class="cykler" data-cykelkategorier="3">
                    <h2>Bycykler</h2>
                    <article class="cityside vandret">
                    </article>
                    <!-- <div class="stryge_container">
                <div class="pil_venstre"></div>
                <div class="pil_hoejre"></div>
            </div>-->
                </section>

                <section id="racer-cykler" class="cykler" data-cykelkategorier="4">
                    <h2>Racer</h2>
                    <article class="racerside vandret">
                    </article>
                    <!--<div class="stryge_container">
                <div class="pil_venstre"></div>
                <div class="pil_hoejre"></div>
            </div>-->
                </section>

                <section id="trekking-cykler" class="trekcykler cykler" data-cykelkategorier="5">
                    <h2>Trekking</h2>
                    <article class="trekside vandret">
                    </article>
                    <!--<div class="stryge_container">
                <div class="pil_venstre"></div>
                <div class="pil_hoejre"></div>
            </div>-->
                </section>

                <section id="el-cykler" class="elcykler cykler" data-cykelkategorier="2">
                    <h2>Elcykler</h2>
                    <article class="elside vandret">
                    </article>
                    <!-- <div class="stryge_container">
                <div class="pil_venstre"></div>
                <div class="pil_hoejre"></div>
            </div>-->
                </section>

                <section id="signature-cykler" class="signcykler cykler" data-cykelkategorier="6">
                    <h2>Signaturecykler</h2>
                    <div class="box">
                        <div class="textimg">
                            <div class="signlabel">
                                <a href="https://www.koga.com/en/koga-signature">
                                    <h3>Byg din egen cykel</h3>
                                </a>
                            </div>
                        </div>
                    </div>
                </section>

            </div>
            <div style="width: 5%"></div> <!-- right most column for "air" -->
        </div> <!-- flex container end -->

    </main>

    <!--  hvordan en cykel ser ud i listen -->
    <template>
        <article class="encykel">
            <img class="thumbnail" src="" alt="">
            <div class="label">
                <h3 class="navn"></h3>
                <p class="pris"></p>
            </div>
        </article>
    </template>

    <footer id="footer">
    </footer>

    <script src="script.js"></script>
    <script>
        // Alans       let params = (new URL(document.location)).searchParams;
        // let cykelkategori = params.get('cykelkategorier');
        //
        // console.log(cykelkategori)
        //
        // if (cykelkategori) {
        //
        // } else {
        // document.querySelectorAll(".cykler").forEach(cykel => cykel.style.display = "block");
        const urlOverskrift = "https://jenniferjaque.dk/kea/2-semester/tema9/koga/wordpress/wp-json/wp/v2/pages/74";
        const urlCityCykler = "https://jenniferjaque.dk/kea/2-semester/tema9/koga/wordpress/wp-json/wp/v2/cykel?cykelkategorier=3";
        const urlElCykler = "https://jenniferjaque.dk/kea/2-semester/tema9/koga/wordpress/wp-json/wp/v2/cykel?cykelkategorier=2";
        const urlRacerCykler = "https://jenniferjaque.dk/kea/2-semester/tema9/koga/wordpress/wp-json/wp/v2/cykel?cykelkategorier=4";
        const urlTrekCykler = "https://jenniferjaque.dk/kea/2-semester/tema9/koga/wordpress/wp-json/wp/v2/cykel?cykelkategorier=5";

        let loadIterator = 0;
        let filtre;

        const loadArray = [{
            theUrl: urlOverskrift,
            theFunction: visOverskrift,
            contentType: "json"
        }, {
            theUrl: urlCityCykler,
            hvilkenSide: "cityside",
            theFunction: visCykler,
            contentType: "json"
        }, {
            theUrl: urlElCykler,
            hvilkenSide: "elside",
            theFunction: visCykler,
            contentType: "json"
        }, {
            theUrl: urlRacerCykler,
            hvilkenSide: "racerside",
            theFunction: visCykler,
            contentType: "json"
        }, {
            theUrl: urlTrekCykler,
            hvilkenSide: "trekside",
            theFunction: visCykler,
            contentType: "json"
        }];

        document.addEventListener("DOMContentLoaded", start);

        function start() {
            loadTheContentArray(loadArray[loadIterator]);

        }

        async function loadTheContentArray(contentToLoad) {
            let jsonData = await fetch(contentToLoad.theUrl);
            let indhold;
            if (contentToLoad.contentType == "json") {
                indhold = await jsonData.json();
            } else {
                indhold = await jsonData.text();
            }
            if (contentToLoad.theFunction == visCykler) {

                contentToLoad.theFunction(indhold, contentToLoad.hvilkenSide);

            } else {
                contentToLoad.theFunction(indhold);

            }

            loadIterator++;
            if (loadIterator < loadArray.length) {
                loadTheContentArray(loadArray[loadIterator]);
            }
        }


        function visOverskrift(indhold) {
            document.querySelector(".overskrift").textContent = indhold.title.rendered;
            document.querySelector(".underoverskrift").innerHTML = indhold.content.rendered;
        }

        function visCykler(indhold, hvilketElement) {
            const skabelon = document.querySelector("template");
            const liste = document.querySelector("." + hvilketElement);

            indhold.forEach(cykel => {
                //console.log(cykel);
                const klon = skabelon.cloneNode(true).content;
                //siden skal først loade alle billeder i den valgte sektion fra forsiden (index.html).
                klon.querySelector(".thumbnail").onload = function() {
                    //tjek om alle billeder er færdige med at loade på cykler.html
                    console.log("jeg er loadet og jeg er ", this);
                    //Find parent element, der indeholder alle cykelbilleder
                    console.log("jeg er loadet og min mor er ", this.parentElement);
                }
                klon.querySelector(".thumbnail").src = cykel.billed_1.guid;
                klon.querySelector(".navn").textContent = cykel.title.rendered;
                klon.querySelector(".pris").textContent = cykel.pris + " kr.";

                liste.appendChild(klon);
                liste.lastElementChild.addEventListener("click", () => {
                    location.href = "singleView.html?id=" + cykel.id;
                });
            })
        }

    </script>
</body>

</html>
